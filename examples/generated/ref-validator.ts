// Generated by @speria-jp/json-schema-validator-gen
// https://github.com/speria-jp/json-schema-validator-gen
// Do not edit manually
// ============================================================================
// Validation Types (auto-generated)
// ============================================================================

type ValidationResult<T> =
  | { success: true; data: T }
  | { success: false; issues: ValidationIssue[] };

interface ValidationIssue {
  code: ValidationIssueCode;
  path: (string | number)[];
  message: string;
  expected: string;
  received: string;
}

type ValidationIssueCode =
  | "invalid_type"
  | "invalid_value"
  | "too_small"
  | "too_big"
  | "invalid_string"
  | "not_integer"
  | "not_unique"
  | "unrecognized_key"
  | "missing_key";

interface ValidationOptions {
  abortEarly?: boolean;
}

// ============================================================================
// Validation Helpers (auto-generated)
// ============================================================================

function _addIssue(
  issues: ValidationIssue[],
  code: ValidationIssueCode,
  path: (string | number)[],
  expected: string,
  received: string,
): void {
  issues.push({
    code,
    path,
    message: `Expected ${expected}, received ${received}`,
    expected,
    received,
  });
}

function _getType(value: unknown): string {
  if (value === null) return "null";
  if (Array.isArray(value)) return "array";
  return typeof value;
}


export type Ref = {
    id: number;
    name: string;
    address: Address;
    workAddress?: Address;
};


type Address = {
    street: string;
    city: string;
    zipCode?: string;
};


export function validateRef(value: unknown, options?: ValidationOptions): ValidationResult<Ref> {
    const issues: ValidationIssue[] = [];
    const abortEarly = options?.abortEarly ?? false;
    if (!(typeof value === "object" && value !== null && !Array.isArray(value))) {
        _addIssue(issues, "invalid_type", [], "object", _getType(value));
        if (abortEarly)
            return { success: false, issues };
    }
    else {
        if (!("id" in value)) {
            _addIssue(issues, "missing_key", [], "object with required property \"id\"", "object without property \"id\"");
            if (abortEarly)
                return { success: false, issues };
        }
        if (!("name" in value)) {
            _addIssue(issues, "missing_key", [], "object with required property \"name\"", "object without property \"name\"");
            if (abortEarly)
                return { success: false, issues };
        }
        if (!("address" in value)) {
            _addIssue(issues, "missing_key", [], "object with required property \"address\"", "object without property \"address\"");
            if (abortEarly)
                return { success: false, issues };
        }
        if ("id" in value) {
            if (!(typeof value.id === "number")) {
                _addIssue(issues, "invalid_type", [...[], "id"], "integer", _getType(value.id));
                if (abortEarly)
                    return { success: false, issues };
            }
            else {
                if (!Number.isInteger(value.id)) {
                    _addIssue(issues, "not_integer", [...[], "id"], "integer", String(value.id));
                    if (abortEarly)
                        return { success: false, issues };
                }
            }
        }
        if ("name" in value) {
            if (!(typeof value.name === "string")) {
                _addIssue(issues, "invalid_type", [...[], "name"], "string", _getType(value.name));
                if (abortEarly)
                    return { success: false, issues };
            }
        }
        if ("address" in value) {
            const _refResult1 = validateAddress(value.address);
            if (!_refResult1.success) {
                for (const _issue2 of _refResult1.issues) {
                    issues.push({ ..._issue2, path: [...[...[], "address"], ..._issue2.path] });
                }
                if (abortEarly)
                    return { success: false, issues };
            }
        }
        if ("workAddress" in value) {
            const _refResult3 = validateAddress(value.workAddress);
            if (!_refResult3.success) {
                for (const _issue4 of _refResult3.issues) {
                    issues.push({ ..._issue4, path: [...[...[], "workAddress"], ..._issue4.path] });
                }
                if (abortEarly)
                    return { success: false, issues };
            }
        }
    }
    if (issues.length > 0) {
        return { success: false, issues };
    }
    return { success: true, data: value as Ref };
}
export function parseRef(value: unknown): Ref {
    const result = validateRef(value);
    if (!result.success) {
        throw new Error(`Validation failed for Ref: ${result.issues.map(i => i.message)}`);
    }
    return result.data;
}


function validateAddress(value: unknown, options?: ValidationOptions): ValidationResult<Address> {
    const issues: ValidationIssue[] = [];
    const abortEarly = options?.abortEarly ?? false;
    if (!(typeof value === "object" && value !== null && !Array.isArray(value))) {
        _addIssue(issues, "invalid_type", [], "object", _getType(value));
        if (abortEarly)
            return { success: false, issues };
    }
    else {
        if (!("street" in value)) {
            _addIssue(issues, "missing_key", [], "object with required property \"street\"", "object without property \"street\"");
            if (abortEarly)
                return { success: false, issues };
        }
        if (!("city" in value)) {
            _addIssue(issues, "missing_key", [], "object with required property \"city\"", "object without property \"city\"");
            if (abortEarly)
                return { success: false, issues };
        }
        if ("street" in value) {
            if (!(typeof value.street === "string")) {
                _addIssue(issues, "invalid_type", [...[], "street"], "string", _getType(value.street));
                if (abortEarly)
                    return { success: false, issues };
            }
        }
        if ("city" in value) {
            if (!(typeof value.city === "string")) {
                _addIssue(issues, "invalid_type", [...[], "city"], "string", _getType(value.city));
                if (abortEarly)
                    return { success: false, issues };
            }
        }
        if ("zipCode" in value) {
            if (!(typeof value.zipCode === "string")) {
                _addIssue(issues, "invalid_type", [...[], "zipCode"], "string", _getType(value.zipCode));
                if (abortEarly)
                    return { success: false, issues };
            }
            else {
                if (!/^\d{5}$/.test(value.zipCode)) {
                    _addIssue(issues, "invalid_string", [...[], "zipCode"], "string matching pattern /^\\d{5}$/", value.zipCode);
                    if (abortEarly)
                        return { success: false, issues };
                }
            }
        }
    }
    if (issues.length > 0) {
        return { success: false, issues };
    }
    return { success: true, data: value as Address };
}
